/*!
* Touch UI - Property Grid
* Copyright 2021-2024 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){function g(n,i){if(v||(v=t.userVar("propCollapsed")||{}),arguments.length===2)i===null?delete v[n]:v[n]=i,t.userVar("propCollapsed",v);else return v[n]}function at(n){var l=[],a={},r=n.properties,u,s=0,h=0,e,i,f,c,o;r||(r=n.properties={});for(e in r)i=r[e],i||(i=r[e]={}),i.parent=n,s++,i.name||(i.name=e),i.text||(i.text=t.prettyText(e,!0)),i.type||(i.type="text"),i.type==="text"&&("length"in i?typeof i.length=="string"&&(i.length=parseInt(i.length)):i.length=255),i.type==="bool"&&(i.style||(i.style="DropDownList")),i.values&&!i.style&&(i.style="DropDownList"),!i.style||"required"in i||(i.placeholder="(not set)"),i.type!=="bool"||i.style!=="DropDownList"||i.values||(i.values=ei),i.primary&&(u=i),f=i.visible,typeof f=="boolean"&&(i.visible=f=`(${f})`),n.visible?(i.visible=f!=null?`(${n.visible})&&(${f})`:n.visible,h++):f!=null&&h++,c=i.text+"|"+e,l.push(c),a[c]=i,i.properties&&at(i);n.parent&&s&&s===h&&(n.complexOnDemand=!0);o=r._names=[];l.sort().forEach(n=>{o.push(a[n].name)});u&&(o.splice(o.indexOf(u.name),1),u.visible!=null&&o.forEach(n=>{var t=r[n];t.visible=t.visible!=null?`(${u.visible})&&(${t.visible})`:u.visible}),o.splice(0,0,u.name))}function nt(n,i,r){var u=`${n._survey.context.instance}.${i||n._survey.context.propSet?._registered}.lastSelected`;if(arguments.length===3)t.userVar(u,r);else return t.userVar(u)}function si(i){var f=i.find("[data-category]:not(.app-collapsed)"),r,u;f.length||i.find("[data-category]:first .app-toggle").trigger("vclick");i.find(".app-complex-on-demand").each(yt);r=n.pageInfo().dataView;r&&(u=t.userVar(`${r._survey.context.instance}.navigate`),u?t.userVar(`${r._survey.context.instance}.navigate`,null):u=nt(r),u?(n.propGrid.select(u),i.find(".app-wrapper .app-has-focus").length||vt()):vt());y()}function vt(){var t=n.treeView.context();t?.node?.hint?it("",ht(t.node)):n.propGrid.info()}function yt(){var t=$(this),r;if(t.is(".app-complex-on-demand")){for(var i=!1,u=t.data("depth"),n=t.next();!i&&n.length&&n.is("[data-depth]");){if(r=n.data("depth"),n[0].style.display!=="none"){(u==null&&r==1||r>u)&&(i=!0);break}n=n.next()}t.toggleClass("app-complex-off",!i)}}function y(i){var o,r,h,c,l,s,v,a,u,f;if(!i){clearTimeout(y._timeout);setTimeout(y,64,!0);return}if(o=n.treeView.context,o){if(r=o(),h=!1,!r.node&&(r=o(r.elem.find(".app-root")),r.node&&(h=!0,c=n.treeView.ensureNodeSelf(r),c))){c.then(y);return}l=[];s=r.elem.closest(".app-propgrid").find(".app-toolbar-nav");s.find(".app-btn").each(function(){var n=$(this),t=n.attr("data-pg-action");switch(t){case"propgrid.refresh":break;case"propgrid.collapse-all":case"propgrid.pin":n.toggleClass("app-disabled",!r.node||h);break;default:l.push(n)}});l.forEach(n=>{n.remove()});v=n.treeView.actions(r);a=[];v.forEach(t=>{var i=t.icon,r;!i||a.includes(i)||typeof t.context=="string"&&t.context.match(/^(cut|copy|paste.+?)$/)||(a.push(t.icon),r=e("app-btn").appendTo(s).attr({title:t.text,"data-pg-action":"propgrid.custom."+i}),n.icon(i,r))});u=n.lastTouch();u&&(f=t.clientRect(s),f.left<=u.x&&u.x<f.right&&f.top<u.y&&u.y<f.bottom&&n.tooltip(!1))}}function pt(){var t=[];i("[data-layout]").data("rootNodes")[0].children.forEach(function(n){n.ready||t.push(n)});t.length&&n.layout({controls:t})}function wt(){var t=n.scrollable();t.find(".app-stub").css("height",c(t).height)}function bt(){var r=n.scrollable(),u=c(r),i=r.find(".app-stub"),f=c(i);t.intersect(u,f)?i.css("height",u.bottom-f.top+1):i.css("height","")}function tt(){var u,f;if(w())return!1;var i=$(this).closest("[data-property]"),s=i.data("property")+"_",r=!i.is(".app-collapsed"),h=et(i),t=i.next(),e=[],o;for(wt(r),g(i.data("scope")+"$"+i.data("property"),r==!0?r:h.expanded===!1?!1:null),i.toggleClass("app-collapsed",r);t.length&&(t.data("property")||"").startsWith(s);)t.is(".app-collapsed")&&e.push(t.data("property")),r?t.addClass("app-collapsed-prop"):(u=t.data("property"),f=!1,e.forEach(function(n){u.startsWith(n)&&u.length>n.length&&(f=!0)}),f||t.removeClass("app-collapsed-prop")),o=t,t=t.next();return r||pt(),n.hasFocus(i.find('[data-control="field"]')),bt(),r||ri(i,o),setTimeout(()=>n.scrollable("focus")),!1}function ft(t,r){r!==!1&&n.scrollIntoView(t);i(".app-has-focus").removeClass("app-has-focus");t.addClass("app-has-focus");i().removeData("last-focused-field");var u=kt(t);it(u.text,ht(u),!1)}function it(n,t,r,u){var f=i().data("infoPane");f&&(f.scrollTop(0),f.find(".app-text").text(n||""),f.find(".app-description").html(t||""),f.find(".app-see-also").html(u||"").css("display",u?"":"none"),f.find(".app-help").css("display",r?"":"none"))}function kt(n){var t=n.closest("[data-property]"),i,r;return t.length||(t=n.closest("[data-category]")),r=t.data("scope"),i=t.data("category-name")||t.data("category"),k[r][i]}function et(n){var i=kt(n),r=n.closest("[data-property]"),u=r.data("property")||"",t=i;return u.split(/_/).forEach(n=>t=t.properties[n]),t}function hi(){return n.dataView().data("survey")}function w(){return r.blur(),!r.valid()}function dt(n){var i=l("fetch",null,n).propGrid,t=i.result;if(t)return t.then(t=>{if(!t)throw new Error("Unable to fetch data for the selected node.");n.nodeElem&&n.nodeElem.is(".app-root")||pi(n,t[0],t[1])}),t}function ot(){n.activePage().removeData("nextSelectedNode")}function st(t,r,u,f,e){if(f==null&&(f=u),e==null&&(e=Math.ceil(f/2)),t.css({minWidth:u,maxWidth:u,width:u}).data("modalWidth",u),n.resetPageHeight(t),r||(r=i('[data-draggable="propgrid-divider"]')),r.length){var o=parseInt(t[0].style.minWidth),s=Math.max(Math.ceil(e*(o/f)),h());o-s<h()&&(s=o-h()-7);gt(r,o,s)}}function gt(n,t,i){var r=i+"px",u=t-i-7+"px";n.each(function(){this.style.left=i+"px";for(var n=this.nextSibling;n;){switch(n.getAttribute&&n.getAttribute("data-control")){case"label":n.style.maxWidth=r;n.style.minWidth=r;n.style.width=r;break;case"field":n.style.maxWidth=u;n.style.minWidth=u;n.style.width=u}n=n.nextSibling}})}function ci(){var t=n.dataView(),i;if(t)for(i in t._pageSession)i.match(/(_listOfValues_|_listCache)/)&&delete t._pageSession[i]}function l(t,r,u){var f,e,o,s;u||(u=n.treeView.context?n.treeView.context(i(".app-treeview .app-selected")):{});f={eventName:t};for(e in r)f[e]=r[e];return o=$.Event("propgrid.app",{propGrid:f,treeView:u}),s=f?.patch?._map,s&&delete f.patch._map,$(document).trigger(o),f.infoPaneChanged&&rt(i("[data-property] .app-has-focus:first")),t==="edit"&&f.result&&f.result.then(t=>{var f,o,i,e,h,c,w;n.treeView.replaceNode(u,t);var a=u.elem.find(".app-selected"),v=a.find("> .app-node .app-icon"),p=u.elem.closest(".app-propgrid").find(".app-selector-target");if(p.find(".app-text").text(a.find("> .app-node .app-text").text()),f=p.find(".app-icon"),v.length&&f.length&&(o=v[0].outerHTML,o!=f[0].outerHTML&&($(o).insertBefore(f),f.remove())),i=n.dataView(),e=i?.data(),e){for(h in e)c=i.findField(h),c&&(i._originalRow[c.Index]=e[h]);ci()}l("changed",{target:r.context.target,propMap:s},u);y();r.type!=u.nodeType&&(w=nt(i,r.type),nt(i,u.nodeType,w),dt(u))}),o}function li(){}function a(t,i){i?(t._get=ti,t._set=ni,t._tagged=vi,t._changed||(t._changed=li),t._context=n.propGrid.data):(delete t._get,delete t._set,delete t._changed,delete t._context,delete t._tagged,delete t._tagList)}function ni(n,t){if(arguments.length!=2)throw new Error('The property setter expects the "selector" and "value" parameters.');var i=this;n=n.split(/\./g);n.forEach((r,u)=>{if(u==n.length-1)i[r]=t;else{var f=i[r];f||(f=i[r]={});i=f}})}function ti(n){if(arguments.length!=1)throw new Error('The property getter expects the "selector" parameter only.');var t=this,i=null;return n=n.split(/\./g),n.every((r,u)=>{if(u==n.length-1)i=t[r];else if(t=t[r],t!=null)return!0}),i}function p(i,r,u){try{if(arguments.length==2)return i.get?t.eval(i.get,r):i.select?ti.call(r,i.select):r[i.propName];i.set?t.eval(i.set,r,u):i.select?ni.call(r,i.select,u):r[i.propName]=u}catch(f){throw Error((arguments.length==2?`Unabled to evaluate the "getter" of the ${n.propGrid.toPropPath(i)} property: ${i.get}`:`Unabled to evaluate the "setter" of the ${n.propGrid.toPropPath(i)} property: ${i.set}`)+"\nError: "+f.message);}}function rt(n){var e;if(!$(n).length){it();return}for(var u=et(n),i=u.parent,f=[u.text],t=[],r=u.seeAlso;i;)(i.parent||i.name!="misc")&&f.splice(0,0,i.text),i=i.parent;r&&(typeof r=="string"&&(r=[r]),e=$app.touch.dataView()._survey.context?.target||{},r.forEach(n=>{var i=$app.eval(n,e);i!=null&&(t.length||(t.push(`<b>${s.Menu.SeeAlso}</b>`),t.push("<ul>")),t.push("<li>",i,"<\/li>"))}),t.length&&t.push("<\/ul>"));it(f.join(" / "),ht(u),!0,t.join(""))}function ht(n){var t=n.hint;return t!=null&&(t=t.replace(/`(.+?)`/g,"<code>$1<\/code>").replace(/\*\*(.+?)\*\*/g,"<b>$1<\/b>").replace(/\r?\n/g,"<br/>")),t}function u(n,i,r){if(i||(i=ut().instance),n=`propGrid.${i}.${n}`,arguments.length==2)return t.userVar(n);t.userVar(n,r)}function ii(){var r=i(),c,f,o,s;if(r.is(".app-propgrid")){c=t.clientRect(r);f=$(window).width()-h()*2;c.width>f&&st(r,null,f);var a=r.find(".app-wrapper"),e=t.clientRect(a),l=r.find(".app-infopane"),v=t.clientRect(l);v.top<e.bottom&&(l.css({height:"",minHeight:"",maxHeight:""}),u("infoPane.height",null,null),n.resetPageHeight());o=r.find(".app-top-nav");s=t.clientRect(o);(s.top<0||s.height>=window.innerHeight||e.bottom>window.innerHeight||e.height<b())&&(o.css({height:"",minHeight:"",maxHeight:""}),u("topNav.height",null,null),n.resetPageHeight());n.scrollable("refresh")}}function b(){return n.settings("ui.propGrid.minHeight")||100}function h(){return n.settings("ui.propGrid.minDividerX")||75}function ai(n,r){i().is(".app-propgrid")&&n.forEach(n=>t.eval(n.finish,r))}function ri(i,r){var o=t.clientRect(n.scrollable(r)),h=t.clientRect(r),e;if(h.bottom>o.bottom){for(var c=t.clientRect(i),s=c.height,f=i,u=i.next();u.length;){if(e=t.clientRect(u),s+=e.height,s>o.height)break;else e.height&&(f=u);if(u.is(r))break;u=u.next()}f.length&&!i.data("navigating")&&setTimeout(()=>{f[0].scrollIntoView({block:"end",behavior:"smooth"})},32)}}function ut(){return n.dataView()?._survey?.context}function ui(n,t,i,r){var f,u,e;if(n.compound)return f=[],u=[],n.compound.forEach(t=>{var s=n.name+"_"+t,e=i[s],o=r[s];o!=null&&(e.type==="bool"?o&&f.push(e.text):f.push(o));e&&(e.type==="bool"?e.default&&u.push(e.text):e.default!=null&&u.push(e.default))}),e=f.join(", "),t&&(r[n.name]=e,t.default=n.default=u.length?u.join(", "):null),e}function vi(n,t){var i=this._tagList,r,u;return i||(i=this._tagList=yi(this.tags)),n instanceof RegExp?(i.every(t=>(r=t.match(n),r==null)),r||(r={})):(n.trim().split(/\s*,\s*/g).every(n=>{var o,e,f;if(arguments.length==2&&(n=(t?"+":"-")+" "+n),o=n.match(/^\s*(\+|\-)\s*(.+)$/),o)if(e=o[2],o[1]==="+")f=i.indexOf(e),f===-1&&(i.push(e),u=!0);else if(e.match(/\*$/))for(e=e.substring(0,e.length-1),f=0;f<i.length;)i[f].startsWith(e)||i[f]+"-"===t?(i.splice(f,1),u=!0):f++;else for(f=i.indexOf(e);f>=0;)i.splice(f,1),u=!0,f=i.indexOf(e);else r=i.indexOf(n)!==-1;return r==null}),u&&(this.tags=i.join(" "),this._changed("tags"))),r}function yi(n){return n==null?n=[]:typeof n=="string"&&(n=(n||"").replace(/,/g," ").split(/\s+/g)),n}function pi(t,i,u){var a=ut(),f,o,s,h,c,l;a&&(r.blur(),f=n.treeView.selectionToList(t.elem),t.nodeElem.is(".app-selected")||(f.length?f.length===1&&(i=f[0].nodeData):u=null),$app.touch.propGrid("show",{instance:a.instance,propSet:u,target:i}),o=t.elem.closest(".app-propgrid").find(".app-selector-target").empty(),o.attr("data-title",""),f.length&&(s=f[0].nodeText,c=e("app-node").appendTo(o),f.length>1?(s=s+` +${f.length-1}`,h='<i class="app-icon material-symbol" data-multi="true"><\/i>'):(h=f[0].nodeIcon,o.attr("data-title",f[0].nodeFriendlyPath.replace(/\//g,"&nbsp;/&nbsp;"))),e("app-text").appendTo(c).text(s),l=f[0].node.typeName,l&&f.length===1&&e("app-muted").text(l).appendTo(c),h&&$(h).appendTo(c)))}function wi(n){clearTimeout(d);d=setTimeout(ki,200,n.target,!0)}function bi(n){clearTimeout(d);var t=$(n.target);t.is(".app-prop-name-hint")&&t.remove()}function ki(n){var t=c(n),f=c(n.parentNode),i,r;if(f.right<t.right){i=n.closest(".app-wrapper");r=c(i);n=$(n);var o=parseFloat(n.css("padding-left")),u=e("app-prop-name-hint").appendTo(i),s=parseFloat(u.css("padding-left")),h=parseFloat(u.css("padding-top")),l=n.parent().is(".app-has-focus,.app-was-focused")?.4:0;u.css({height:t.height,lineHeight:t.height+"px",left:t.left+o-r.left-s,top:t.top-r.top+i.scrollTop-h+l}).text(n.text()).data("target",n)}}var t=$app,r=t.input,n=t.touch,fi=$(document),s=Web.DataViewResources,ct=s.Data.BooleanDefaultItems,c=t.clientRect,ei=[{value:!1,text:ct[0][1]},{value:!0,text:ct[1][1]}],k={},v,oi={misc:{scope:"_unknown"}},lt={},d,i=n.activePage,o=t.html,di=o.tag,gi=o.div,nr=o.span,tr=o.$tag,ir=o.$p,f=o.$div,e=o.$span,rr=o.$a,ur=o.$i,fr=o.$li,er=o.$ul;n.propSet=function(n){var r,e,i,s,o,u,h,f;if(!n._registered){r="_unknown";for(e in n){if(i=n[e],r=i.scope,lt[r])return;if(s=k[r],s||(s=k[r]={_names:[]}),s[e]=i,s._names.push(e),i.name||(i.name=e),i.text||(i.text=t.prettyText(e,!0)),i.visible){o=null;u=null;for(h in i.properties)f=i.properties[h],f.primary?u?delete f.primary:u=f:f.visible!=null||f.hidden||o||(o=f);u?u.visible=u.visible!=null?`(${i.visible})&&(${u.visible})`:i.visible:o&&(o.visible=i.visible,o.primary=!0)}at(i)}n._registered=r;lt[r]=n}};n.propGrid=function(r,f){function e(){var n=arguments,u=1,t=arguments[0],r,i=[];for((n.length===1||n.length>1&&!(n[0]==="categories"||n[0]==="props"))&&(u=0,t="all"),r=u;r<n.length;r++)i.push(n[r]);i=i.join("");(t==="categories"||t==="all")&&l.push(i);(t==="props"||t==="all")&&ct.push(i)}function ht(n,i,r,u,o){var y,s={name:(r?r+"_":"")+i.name,type:i.type,text:i.text,options:i.options||{},causesCalculate:!0},a,h,l,c;(i.propName=s.name,"spellCheck"in s.options||(s.options.spellCheck=!1),f.propMap[s.name]=i,i.compound&&(typeof i.compound=="string"&&(i.compound=i.compound.split(/\s*,\s*/g)),i.readOnly=!0,i.virtual=!0,"expanded"in i||(i.expanded=!1)),a=i.readOnly,a!=null&&(typeof a=="boolean"?s.readOnly=a===!0:s.readOnlyWhen=a.toString()),i.length&&(s.length=i.length),i.required&&(s.required=!0),i.hidden&&(s.hidden=!0),i.mode&&(s.mode=i.mode),i.style&&(s.items={style:i.style},h=i.values,h!=null&&(typeof h=="string"&&(h=t.eval(h,i),typeof h=="string"&&(h=h.split(/\s*,\s*/g))),Array.isArray(h)?(s.items.list=[],h.forEach(function(n){typeof n=="string"&&(n={value:n,text:t.prettyText(n,!0)});s.items.list.push(n)}),"default"in i||(i.default=s.items.list[0].value),i.values=s.items.list):typeof h=="object"&&(s.items.controller="data:application/json;base64 "+btoa(JSON.stringify(h)),s.items.style="AutoComplete",s.items.dataValueField="value",s.items.dataTextField="value")),i.style==="DropDownList"&&(s.options.lookup||(s.options.lookup={}),s.options.lookup.nullValue=!1,s.options.pointerAdaptive=!1)),"default"in i&&(i.type&&i.type.match(/^int/i)&&typeof i.default=="string"&&(i.default=parseInt(i.default)),s.default=i.default),i.placeholder&&(s.placeholder=i.placeholder),l=!1,i.properties&&(l=g(n.scope+"$"+s.name),l==null&&(l=i.expanded===!1)),y=p(i,nt),y==null&&"default"in i&&(y=s.default),d[s.name]=y,ft.push(s),s.hidden)||(c=[],it&&c.push("app-collapsed-cat"),i.properties&&(c.push("app-complex"),i.complexOnDemand&&c.push("app-complex-on-demand")),l&&c.push("app-collapsed"),o&&c.push("app-collapsed-prop"),e('<div data-container="row" ','data-property="',s.name,'"'),i.visible!=null&&(s.visibleWhen=i.visible.toString(),e('data-visibility="f:',s.name,'"')),e('data-category-name="',n.name,'" ','data-scope="',n.scope,'" ',c.length?'class="'+c.join(" ")+'" ':"",u?'data-depth="'+u+'"':"",">"),e(`<span data-draggable="propgrid-divider" style="left:${v}px"></span>`),e(`<span data-control="label" data-field="${s.name}" style="min-width:${v}px;max-width:${v}px;width:${v}px">${s.name}</span>`),e(`<span data-control="field" data-field="${s.name}" style="min-width:${ut}px;max-width:${ut}px;width:${ut}px"`,'"',i.style==="DropDownList"&&!1?' data-select-on-focus="false"':"",i.identifier?' data-identifier="true"':"",">[",s.name,"]<\/span>"),i.properties&&e('<span class="app-toggle"><\/span>'),e("<\/div>"),i.properties&&(i.properties._names.forEach(function(t){var r=i.properties[t];ht(n,r,s.name,u+1,l||o)}),ui(i,s,f.propMap,d)))}var o=f.propSet,s=f.use,ft=[],d={},nt=f.target||{},l=[],ct=[],c=[],y={},tt,it,lt=n.dataView()?._survey?.context?.instance===f.instance,et=lt?t.clientRect(i()).width:u("width",f.instance),w=et?Math.min(et,$(window).width()-h()*2):null,ot=w?n.toWidth(w):"xxs",rt=w||n.toWidth(ot),v=Math.min(Math.ceil(rt-h()),u("divider.x",f.instance)||Math.ceil(rt/2)),ut=rt-v-7,st,b;if(f.context||(f.context="generic"),f.propMap={},!s&&o)for(st in o)s||(s=o[st].scope);if(typeof s=="string"&&(s=s.split(/\s*,\s*/)),a(nt,!0),o?(Array.isArray(o)||(o=[o]),o.forEach(function(t){n.propSet(t)})):(o=n.propSet(oi),s=["_unknown"]),s.forEach(function(n){var t=k[n],i,r;if(t){c=c.concat(t._names);for(i in t)r=t[i],r.primary&&(b=i),y[i]=r}else tt="Unknown property set "+n}),tt){n.notify(tt);return}e('<div data-layout="form" data-layout-size="tn">');e('<div data-container="simple">');c.sort((n,t)=>{var i=y[n],r=y[t];return i.text===r.text?0:i.text<r.text?-1:1});b&&(c.splice(c.indexOf(b),1),c.splice(0,0,b));c.forEach(function(n){var i=y[n],r=l.length;it=g(i.scope+"$"+i.name);e('<div data-container="row" ','data-category="',n,'" ','data-scope="',i.scope,'" ','class="',it?"app-collapsed":"",'"',">");e('<span class="app-toggle"><\/span>');e('<span class="app-cat-text">',t.htmlEncode(i.text),"<\/span>");e("<\/div>");i.properties._names.forEach(function(n){var t=i.properties[n];t.primary&&t.visible!=null&&(l[r]=l[r].replace(">",` data-visibility="f:${t.name}">`));ht(i,t,"",0,!1)})});e('<div data-container="row">');e("<\/div>");e("<\/div>");e("<\/div>");a(nt,!1);n.whenPageShown(si);t.survey({context:f,sharedInstance:f.instance?f.instance+"_PropertiesWindow":null,questions:ft,values:d,options:{modal:{dock:f.location||"right",max:ot,width:w,gap:!1,tapOut:!0,background:"transparent",title:!1,always:!0},actionButtons:!1,discardChangesPrompt:!1,className:"app-propgrid",contentStub:!1},layout:l.join("\n"),init:"propgridinit.app",calculate:"propgridcalc.app"})};n.propGrid.select=function(t,u){var h,f,o,s,c,l,e,a;if(t.match(/^\./)&&(t=t.substring(1)),t=="$identifier"&&(h=i('[data-identifier="true"][data-field]').data("field"),h&&(t=h)),t=t.replace(/\./g,"_"),f=i('[data-property="'+t+'"]'),f.length&&f[0].style.display=="none"&&(o=n.dataView(),o&&(s=o.findField(t),s&&(c=[],o._fields.forEach(n=>{n!=s&&n.HeaderText==s.HeaderText&&c.push(n)}),c.every(n=>(t=n.Name,f=i('[data-property="'+t+'"]'),f.length&&f[0].style.display=="none"))))),f.length&&f[0].style.display!="none"){for(l=f.prevAll("[data-category]:first"),l.is(".app-collapsed")&&l.find(".app-toggle").trigger("vclick"),e=f;e.length&&f.is(".app-collapsed-prop");)e=e.prevAll("[data-property].app-complex:first"),e.is(".app-collapsed")&&(e.data("navigating",!0).find(".app-toggle").trigger("vclick"),e.removeData("navigating"));n.scrollIntoView(f,"center");a=f.find('[data-control="label"]');a.is(".app-has-focus")||(f.closest("[data-layout]").find(".app-has-focus").removeClass("app-has-focus"),n.scrollable("focus"),a.trigger("vclick"));u&&r.focus({field:t})}else rt()};n.propGrid.edit=function(t){n.propGrid.select(t);r.focus({field:t})};n.propGrid.data=function(t){var i=t?n.treeView.data(t):ut().target;return i||{}};n.propGrid.info=rt;fi.on("beforemodalcancel.app",()=>{var t,r;if(i().is(".app-propgrid")&&(t=i(".app-has-focus"),t.length))return r=!!$(".app-data-input").length,w()||(r?t.each(function(){n.hasFocus($(this),r)}):n.activePage(".app-has-focus, .app-was-focused").removeClass("app-has-focus app-was-focused"),n.scrollable("focus")),!1}).on("vclick",".app-propgrid [data-category] .app-toggle, .app-propgrid [data-category]",function(t){if(w())return!1;var i=$(this).closest("[data-category]"),o=i.data("category"),r=!i.is(".app-collapsed"),u=i.next(),f=$(t.target).is(".app-toggle"),e;if(ft(i,!f),wt(r),f||n.dblClick(i)){for(g(i.data("scope")+"$"+o,r===!1?null:r),i.toggleClass("app-collapsed",r);u.length&&u.data("category-name")===o;)u.toggleClass("app-collapsed-cat",r),u.is(":visible")&&(e=u),u=u.next();r||pt()}return bt(r),f&&(setTimeout(()=>n.scrollable("focus")),e?ri(i,e):ft(i)),!1}).on("vclick",".app-propgrid-title .app-close",()=>{if(!w())return n.goBack(),!1}).on("vclick",".app-propgrid [data-property].app-complex .app-toggle",tt).on("vdblclick",'.app-propgrid [data-property].app-complex:not(.app-complex-off) [data-control="label"]',tt).on("pointerenter",'.app-propgrid [data-control="label"] .app-control-inner',wi).on("pointerleave",'.app-propgrid [data-control="label"] .app-control-inner, .app-prop-name-hint',bi).on("vclick",".app-prop-name-hint",n=>($(n.target).data("target").trigger("vclick"),setTimeout(()=>{$(".app-data-input").length&&($(".app-prop-name-hint").remove(),setTimeout(()=>clearTimeout(d),150))},200),!1)).on("vdblclick",'.app-propgrid [data-property] [data-control="label"]',function(){var t=$(this),i=r.elementToField(t);i&&i.ItemsStyle==="DropDownList"&&setTimeout(()=>{t.is(".app-has-focus")&&($(".app-data-input").trigger("blur"),n.scrollable("focus"),n.hasFocus(t))},150)}).on("datainputfocus.app",".app-propgrid",function(n){var t=n.dataInput.data("field"),i=r.elementToField(n.dataInput),u=i._dataView;nt(u,null,t);setTimeout(rt,0,n.dataInput)}).on("setvalue.input.app",".app-propgrid",i=>{var c=i.inputValue,u=r.eventToField(i),e,f,l,o,h;return!u.AllowNulls&&String.isBlank(c)?(i.inputValid=!1,i.inputError=s.Validator.RequiredField,!1):(e=u._dataView._survey.context.propMap[u.Name],e.validate&&(f=t.eval(e.validate,u._dataView.data(),c),f!=!0))?(i.inputValid=!1,i.inputError=typeof f=="string"?f:"Please enter a valid value",!1):e.identifier&&!f&&(l=u.Name,o=c,String.isNullOrEmpty(o)||o.match(/^[a-zA-Z]\w*$/)?(h=n.treeView.context(),h.nodeElem.parent().find(">li").each(function(){var n=$(this),t=n.data();if(h.nodeName==t.nodeName&&o.toLowerCase()===t.nodeData[l].toLowerCase()&&!n.is(h.nodeElem))return i.inputError="Name already taken.",!1})):i.inputError="Please enter a valid identifier. An identifier must start with a letter and can contain alphanumeric characters.",i.inputError)?(i.inputValid=!1,!1):void 0}).on("datainputlabel.app",'.app-propgrid [data-control="label"]',function(t){if(!r.valid())return!1;var i=t.dataInput.closest("[data-property]");if(i.length&&($(".app-data-input").length&&(r.blur(),$(this).removeData("clicked").trigger("vclick")),n.hasFocus(i.find('[data-control="field"]')),n.scrollIntoView($(this)),n.saveLastFocusedField(i.data("property")),!t.dblClick||i.is(".app-complex")&&!i.is(".app-complex-off")))return!1}).on("pageautofocus.app",".app-propgrid",function(n){if(!n.reverse)return!1}).on("datainputmove.app",".app-propgrid .app-wrapper",function(t){if(t.direction.match(/left|right/)||t.direction==="down"&&t.keyCode===13){var r=t.textInput,i=r.closest("[data-property]");if(i.length)return n.propGrid.timeout=setTimeout(()=>{r.trigger("blur"),n.scrollIntoView(i),n.hasFocus(i.find('[data-control="field"]')),n.scrollable("focus")}),!1}else return!1}).on("keyboardnavigation.app",".app-propgrid .app-wrapper",function(t){var f=t.direction,e=$(t.target),o=$(".app-data-input"),u;if(!o.length&&(u=i('[data-control="label"].app-has-focus,[data-container="row"][data-category].app-has-focus'),f.match(/^(up|down|left|right|enter|tab|end|home|edit)$/))){if(f=="end"&&(u=i('[data-control="label"]:visible,[data-container="row"][data-category]:visible').last()),u.length||(f="home"),u.length&&f!=="home"||(u=i('[data-control="label"]:visible,[data-container="row"][data-category]:visible').first()),!u)return;if(u=u.closest('[data-container="row"]'),f==="edit"&&!u.is("[data-category]"))return r.focus({field:u.data("property")}),!1;if(f==="tab")if(u.is("[data-category]"))f=t.originalEvent.shiftKey?"up":"down";else return r.focus({field:u.data("property")}),!1;if(f==="enter")if(u.is(".app-complex:not(.app-complex-off),[data-category]"))f=u.is(".app-collapsed")?"right":"left";else return!1;if(f==="left")if(f="up",u.is(".app-complex:not(.app-complex-off)")){if(!u.is(".app-collapsed"))return tt.apply(u[0],{}),e.trigger("focus"),!1}else if(u.is("[data-category]")&&!u.is(".app-collapsed"))return u.find(".app-toggle").trigger("vclick"),!1;if(f==="right")if(f="down",u.is(".app-complex:not(.app-complex-off)")){if(u.is(".app-collapsed"))return tt.apply(u[0],{}),e.trigger("focus"),!1}else if(u.is("[data-category]")&&u.is(".app-collapsed"))return u.find(".app-toggle").trigger("vclick"),!1;return(f==="up"||f==="down")&&(u=f==="up"?u.prevAll('[data-container="row"]:visible'):u.nextAll('[data-container="row"]:visible')),u=u.first(),u.length&&(u.is("[data-category]")?ft(u):u.is("[data-property]")&&(u=u.find('[data-control="field"]'),n.hasFocus(u),n.saveLastFocusedField(u),u.closest('[data-container="row"]')),n.scrollIntoView(u)),!1}}).on("keyboardpreview.app",".app-propgrid .app-wrapper",function(t){var u=n.activeElement(),e;if(t.originalEvent.key==="F1"&&$(this).find('[data-control="label"].app-has-focus').length)return i(".app-infopane .app-help").trigger("mousedown"),!1;if(!u.is(":input")&&(u=$(this).find('[data-control="label"].app-has-focus'),u.length)){var o=t.originalEvent,f=o.key||"",s=u.data("field");(f.length===1&&!o.ctrlKey||f.match(/Backspace|Del|Delete/))&&(f.length>1?(e=r.elementToField(u),e&&e.AllowNulls?e.isReadOnly()||r.execute({values:[{field:s,value:null}]}):r._buffer=""):r._buffer=f,t.preventDefault(),r.focus({field:s}))}}).on("paste",function(t){var u=n.activeElement(),f,e;if(!u.is(":input")&&i().is(".app-propgrid")&&(u=$(this).find('[data-control="label"].app-has-focus'),u.length))return f=u.data("field"),e=t.originalEvent.clipboardData.getData("text/plain"),r._buffer=e,r.focus({fieldName:f}),!1}).on("propgridinit.app",function(t){var r=t.survey.context,p,k,d,g,nt,tt,c,l;if(!r._initialized){r._initialized=!0;var a=i(),h=n.bar("create",{type:"header",page:a}),it=n.bar("create",{type:"footer",page:a}),v=r.text?f("app-propgrid-title").appendTo(h).text(r.text):null,y=r.nodes?f("app-top-nav").appendTo(h):null,rt=f("app-selector-bar").appendTo(h),w=f("app-toolbar app-toolbar-props").appendTo(h),o=f("app-infopane app-has-scrollbars").appendTo(it).attr("data-context-menu",!0),b=f("app-title").appendTo(o);v&&r.icon&&n.icon(r.icon,v);p=f("app-toolbar app-toolbar-nav").insertAfter(v);k=e("app-btn").appendTo(p).attr({title:s.Pager.Refresh,"data-pg-action":"propgrid.refresh"});n.icon("material-icon-refresh",k);d=e("app-btn").appendTo(p).attr({title:s.PropGrid.CollapseAll,"data-pg-action":"propgrid.collapse-all"});n.icon("material-icon-unfold-less",d);g=e("app-btn").appendTo(p).attr({title:s.PropGrid.Pin,"data-pg-action":"propgrid.pin"});n.icon("material-icon-push-pin",g);e("app-text").appendTo(b);n.icon("material-icon-close",e("app-close").appendTo(v).attr("data-title",s.ModalPopup.Close));f("app-description").appendTo(o);f("app-see-also").appendTo(o);hi().helpUrl&&n.icon("material-icon-help_outline",b).addClass("app-help").attr({title:Web.MembershipResources.Bar.HelpLink,"data-tooltip-location":"above"}).hide();f("app-selector-target").appendTo(rt);nt=e("app-btn").appendTo(w).toggleClass("app-selected",!0).attr({title:s.PropGrid.Categorized,"data-pg-action":"propgrid.categorized"});n.icon("material-icon-category",nt);tt=e("app-btn").appendTo(w).toggleClass("app-selected",!1).attr({title:s.PropGrid.Alphabetical,"data-pg-action":"propgrid.alphabetical"});n.icon("material-icon-sort_by_alpha",tt);n.bar("show",h);n.bar("show",o);a.data("infoPane",o);a.find(".app-vscrollbar").data("expandable",!1);f().attr("data-draggable","propgrid-infopane").insertBefore(o);y&&(n.treeView({container:y,type:r.instance,nodes:r.nodes,trackSelection:!0,dragDrop:r.dragDrop,multiSelect:!0}),f().attr("data-draggable","propgrid-topnav").insertAfter(y));c=u("topNav.height",null);c&&y.css({height:c,minHeight:c,maxHeight:c});l=u("infoPane.height",r.instance);l&&o.css({height:l,minHeight:l,maxHeight:l});f().attr("data-draggable","propgrid-resizer").insertAfter(h);n.resetPageHeight();n.whenPageShown(ii)}}).on("propgridcalc.app",function(i){var o=i.dataView,k=i.survey,v=k.context,e=v.target||{},s=o.data("modified"),d=[],g=[],tt,it,w,b,h,rt,y,ut,c,ft,f,u;if(typeof e!="object"){n.notify(`The value of the target is not an object:
${e}`);return}for(f in s._modified)if(u=v.propMap[f],u.confirm){tt=u;break}if(tt&&(it=t.eval(tt.confirm,s),it))if(k._userConfirmed)delete k._userConfirmed;else{ot();$app.confirm(it).then(()=>{k._userConfirmed=!0,setTimeout(()=>{$(document).trigger(i)})}).fail(()=>{var t,i;n.activeElement("blur");t=[];for(i in s._modified)t.push({field:i,value:s._modified[i]});r.execute(t)});return}e._changed=function(n){var t,r,i;if(n instanceof RegExp){t=v.propMap;for(r in t)i=t[r],i.propName.match(n)&&d.push(i.propName)}else d.push(n.replace(/\./g,"_"))};a(e,!0);w=[];b=[];for(f in s._modified){if(u=v.propMap[f],h=s[f],u.identifier&&e?._links?.rename)return a(e,!1),ot(),n.treeView.rename(h).then(t=>{var i,r;t?.result?.handled||(i=n.treeView.context(),t?.result?.success?(r={},r[f]=u,l("changed",{target:e,propMap:r},i)):h!=null&&i.nodeElem.parent().find("> li").each((n,t)=>{var i=$(t);if(i.data("nodeId")==h.toLowerCase())return i.find("> .app-node").trigger("vclick"),!1}))}),!1;if(h==null&&"default"in u&&(h=u.default,s._modified[f]==h)){w.push({field:f,value:h});continue}for(u.virtual?(u.finish&&b.push(u),u.set&&p(u,e,h),rt=o.findField(u.propName),rt&&(o._originalRow[rt.Index]=h)):(p(u,e,h),e._changed(f)),u.reset&&u.reset.forEach(n=>{var i=o.findField(n),t;i&&(t=v.propMap[n]?.default,o._originalRow[i.Index]!=t&&(o._originalRow[i.Index]=t,g.push({field:n,value:t}),s[n]=t))}),y=u;y&&!y.compound;)y=y.parent;y&&(ut=ui(y,null,v.propMap,s),s[y.name]!=ut&&w.push({field:y.name,value:ut}))}if(w.length&&(w.forEach(n=>{var t=o.findField(n.field);o._editRow[t.OriginalIndex]=n.value}),t.input.execute({values:w})),d.length){c={_map:{}};a(c,!0);d.forEach(n=>{var t=v.propMap[n],i;if(!t)throw new Error(`Unknown property '${n}' is specified in the change log.`);i=p(t,e);p(t,c,i);c._map[n]=t;t.seeAlso&&(ft=!0)});for(f in c._map){var u=c._map[f],et=s[u.propName],nt=p(u,c);et!==nt&&(nt==null&&"default"in u&&(nt=u.default),g.push({field:f,value:nt}))}a(c,!1);clearTimeout(o._studioPatchTimeout);o._studioPatchTimeout=setTimeout(l,100,"edit",{patch:c,data:s,context:v,infoPaneChanged:ft,type:v.propSet._registered});g.length&&t.input.execute({values:g});for(f in c._map)u=c._map[f],u.finish&&b.push(u);ot()}return a(e,!1),n.activePage(".app-complex-on-demand").each(yt),clearTimeout(o._studioFinishTimeout),b.length&&(o._studioFinishTimeout=setTimeout(ai,0,b,e)),!1}).on("mousedown pointerdown touchstart",".app-propgrid .app-infopane .app-help",function(){var r=et(i("[data-property] .app-has-focus")),t;return r&&(t=n.dataView(),l("help",{path:n.propGrid.toPropPath(r),data:t.data(),context:t._survey.context.target})),!1}).on("resized.app",ii).on("dblclick",'[data-draggable="propgrid-topnav"]',t=>($(t.target).prev().css({height:"",minHeight:"",maxHeight:""}),n.resetPageHeight(),u("topNav.height",null,null),!1)).on("dblclick",'[data-draggable="propgrid-infopane"]',i=>{var a=$(i.target),r=a.next(),l=r.height(),o,s;r.css({height:"",minHeight:"",maxHeight:""});var e="auto",h="none",c="none",f=null,v=r[0].offsetHeight!=r[0].scrollHeight;return r.css({height:e,minHeight:c,maxHeight:h}),n.resetPageHeight(),o=t.clientRect(r),s=t.clientRect(n.scrollable()),o.top<=s.top+b()?(r.css({height:"",minHeight:"",maxHeight:f}),n.resetPageHeight(),o=t.clientRect(r),s=t.clientRect(n.scrollable()),f=Math.ceil(o.height+Math.min(b(),s.height*2/3)),f!=l&&r.css({height:f,minHeight:f,maxHeight:f})):v&&(f=Math.ceil(r.height()),f===l&&(f=null,r.css({height:"",minHeight:"",maxHeight:""}))),e=f==null?"":Math.ceil(r.height()),c=e,h=e,r.css({height:e,minHeight:c,maxHeight:h}),u("infoPane.height",null,f),n.resetPageHeight(),!1}).on("dblclick",'[data-draggable="propgrid-divider"]',()=>{u("divider.x",null,null);var n=i(".app-treeview .app-selected:first").removeClass("app-selected");return n.find(">.app-node").trigger("vclick"),!1}).on("dblclick",'[data-draggable="propgrid-resizer"]',()=>{u("width",null,null);var r=i(),f=n.toWidth("xxs"),e=u("divider.x",null);return r.removeData("modalWidth"),st(r,null,f,null,e?f/t.clientRect(r).width*e:null),!1}).on("vclick",'.app-propgrid [data-container="row"]',n=>{if(!n.isDefaultPrevented()){var t=$(n.target).prev().find('[data-control="label"]');if(!t.is(".app-has-focus"))return t.trigger("vclick"),!1}}).on("vclick",'.app-propgrid [data-input="none"]',t=>{var i=$(t.target).closest('[data-container="row"]'),u=i.find('[data-control="label"]'),r;return u.is(".app-has-focus")||(u.trigger("vclick"),r=!0),n.dblClick(i)&&i.is(".app-complex")&&(i.find(".app-toggle").trigger("vclick"),r=!0),r?!1:void 0}).on("vclick",".app-propgrid [data-pg-action]",n=>{if(w())return!1;var t=$(n.target).closest("[data-pg-action]"),i=t.attr("data-pg-action");return t.is(".app-disabled")||setTimeout(l,0,"action",{action:i,button:t}),!1}).on("vclick",".app-propgrid .app-selector-target",t=>{var u,i,r;if(n.scrollable("focus"),u=$(t.target).closest(".app-selector-target").addClass("app-selected"),setTimeout(()=>u.removeClass("app-selected"),96),i=n.activePage(".app-treeview").scrollLeft(0),r=i.find(".app-selected:first > .app-node"),r.length){r.parent().parents(".app-collapsed").removeClass("app-collapsed").addClass("app-expanded");var o=i.find(".app-selected"),f=c(i),e=c(o);e.top>=f.bottom||e.bottom<=f.top?r.find(".app-anchor")[0].scrollIntoView({behavior:"smooth",block:"center"}):(i.addClass("app-dragging"),setTimeout(()=>{i.removeClass("app-dragging")},100))}return!1}).on("treeview.app",t=>{var u=t.treeView,o=u.eventArgs,f,i,e;switch(u.eventName){case"beforeselect":if(f=u.elem,i=f.closest(".ui-page"),i.length&&n.findInput().length&&(i.data("nextSelectedNode",f),r.blur(),!i.data("nextSelectedNode")))return!1;break;case"select":t.result=dt(u);break;case"hypermedia":if(i=l("hypermedia",{eventArgs:o,trigger:u.trigger}).propGrid,e=t.result=i.result,!e)return;e.then(()=>{})}}).on("propgrid.app",t=>{var r=t.propGrid,u=t.treeView,i,s,e,o,f;if(!t.isDefaultPrevented()&&r.eventName==="action"){switch(r.action){case"propgrid.collapse-all":if(i=n.activePage(".app-treeview .app-selected"),t.treeView.node&&(t.treeView.node.parent||t.treeView.elem.find(".app-expanded").length))i=i.first();else{s=$.Event("vclick",{ctrlKey:!0});i.removeClass("app-selected").first().addClass("app-selected").find("> .app-node").trigger(s);return}e=i.parents("li");e.length&&(i=e.last(),n.activePage(".app-treeview .app-selected").removeClass("app-selected"));n.activePage(".app-treeview .app-expanded").removeClass("app-expanded").addClass("app-collapsed");i.find(">.app-node").trigger("vclick");i.length&&i[0].scrollIntoView({block:"center",behavior:"instant"});break;case"propgrid.refresh":n.activePage(".app-treeview .app-selected").removeClass("app-selected");n.activePage(".app-treeview .app-expanded").removeClass("app-expanded").addClass("app-collapsed");n.propGrid("show",{instance:ut().instance});n.treeView({treeView:t.treeView.elem});break;default:o=r.action.match(/^propgrid.custom.(.+)$/);o?(u.node||(u=n.treeView.context(u.elem.find(".app-root"))),n.treeView.actions(u).forEach(n=>{n.icon===o[1]&&(f=n)}),f&&setTimeout(f.callback,0,f.context)):n.notify(r.action)}return y(),!1}});t.dragMan["propgrid-topnav"]={options:{taphold:!1,immediate:!1},start:function(u){var f=this,o=u.target,s;s=t.clientRect(o);u.dir="all";f._target=o.addClass("app-dragging");f._deltaY=s.top-u.y;var e=i(".app-bar-header .app-top-nav"),h=t.clientRect(e),c=n.scrollable(),l=t.clientRect(c);f._topNav=e;f._topNavHeight=e.height();f._minY=u.y-Math.ceil(h.height-(n.settings("ui.propGrid.minTopNavHeight")||80)+1);f._maxY=Math.ceil(h.bottom+(l.height-b()))-1;r.blur()},move:function(n){var t=this,i=n.y+t._deltaY;i<t._minY&&(t._newY=i);i>t._maxY&&(i=t._maxY);i!=t._newY&&(t._newY=i,t._position())},cancel:function(){var t=this;t._target.removeClass("app-dragging");delete t._target;t._topNavHeight&&t._position(t._topNavHeight);delete this._topNav;n.scrollable("refresh")},end:function(){u("topNav.height",null,this._topNav.height());delete this._topNavHeight;this.cancel()},_position:function(i){var u=this._topNav,f=t.clientRect(u),r=i||Math.ceil(f.height+(this._newY-f.bottom));u.css({height:r,maxHeight:r,minHeight:r});n.resetPageHeight()}};t.dragMan["propgrid-infopane"]={options:{taphold:!1,immediate:!1},start:function(u){var f=this,o=u.target,s;s=t.clientRect(o);u.dir="all";f._target=o.addClass("app-dragging");f._deltaY=s.top-u.y;var e=i(".app-bar-footer .app-infopane"),h=t.clientRect(e),c=n.scrollable(),l=t.clientRect(c);f._infoPane=e;f._infoPaneHeight=e.height();f._minY=h.top-Math.ceil(l.height-b()+1);f._maxY=Math.ceil(h.bottom-(n.settings("ui.propGrid.minInfoPaneHeight")||50));f._padding=Math.floor(parseFloat(e.css("padding-bottom"))+parseFloat(e.css("padding-top")));r.blur()},move:function(n){var t=this,i=n.y+t._deltaY;i<t._minY&&(i=t._newY);i>t._maxY&&(i=t._maxY);i!=t._newY&&(t._newY=i,t._position())},cancel:function(){var t=this;t._target.removeClass("app-dragging");delete t._target;t._infoPaneHeight&&t._position(t._infoPaneHeight);delete t._infoPane;n.scrollable("refresh")},end:function(){u("infoPane.height",null,this._infoPane.height());delete this._infoPaneHeight;this.cancel()},_position:function(i){var u=this._infoPane,f=t.clientRect(u),r=i||Math.ceil(f.height+(f.top-this._newY)-this._padding);u.css({height:r,maxHeight:r,minHeight:r});n.resetPageHeight()}};t.dragMan["propgrid-divider"]={options:{taphold:!1,immediate:!1},start:function(n){var i=this,u=n.target,o=t.clientRect(u),f,e;n.dir="all";i._deltaX=o.left-n.x+7;f=u.closest('[data-layout="form"]');e=i._formRect=t.clientRect(f);i._x=parseInt(u.css("left"));i._minX=e.left+h()-1;i._maxX=e.right-h()-7;i._dividers=f.find('[data-draggable="propgrid-divider"]');r.blur()},move:function(n){var t=this,i=Math.round(n.x+t._deltaX);i<t._minX&&(i=t._minX);i>t._maxX&&(i=t._maxX);i=i-t._formRect.left+1;i!=t._newX&&t._position(i)},cancel:function(){var n=this;n._x!=null&&n._position(n._x);delete n._target;delete n._dividers},end:function(){u("divider.x",null,this._newX);delete this._x;this.cancel()},_position:function(n){var t=this;t._newX=n;gt(t._dividers,t._formRect.width,n)}};t.dragMan["propgrid-resizer"]={options:{taphold:!1,immediate:!1},start:function(n){var i=this,u=n.target,e=t.clientRect(u),f,o;n.dir="all";i._target=u;u.addClass("app-dragging");f=i._page=u.closest(".ui-page");i._location=f.is(".app-page-modal-dock-left")?"left":"right";i._width=parseInt(f.css("min-width"));i._availWidth=$(window).width();i._minX=h()*2;i._maxX=i._availWidth-i._minX;i._deltaX=e.left-n.x+(i._location==="left"?e.width:0);o=i._dividers=f.find('[data-draggable="propgrid-divider"]');o.length&&(i._dividerX=parseInt(i._dividers[0].style.left));r.blur()},move:function(n){var t=this,i=Math.round(n.x+t._deltaX),r;i<t._minX&&(i=t._minX);i>t._maxX&&(i=t._maxX);r=t._location==="left"?i:t._availWidth-i+1;r!=t._newWidth&&t._position(r)},cancel:function(){var n=this;n._width!=null&&n._position(n._width);n._target.removeClass("app-dragging");delete n._target;delete n._dividers;delete n._page},end:function(){var n=this,t;u("width",null,n._newWidth);n._dividers.length&&(t=parseInt(n._dividers[0].style.left),u("divider.x",null,Math.abs(t-n._newWidth/2)>1?t:null));delete n._width;n.cancel()},_position:function(n){var t=this;t._newWidth=n;st(t._page,t._dividers,n,t._width,t._dividerX)}};n.propGrid.toPropPath=function(n){for(var i=[],t=n;t;)i.splice(0,0,t.name),t.parent?(i.splice(0,0,"."),t=t.parent):(i.splice(0,0,t.scope+"://"),t=null);return i.join("")}})()